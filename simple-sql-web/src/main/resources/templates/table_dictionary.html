<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head th:replace="~{fragments/site_head :: siteHead}"></head>
	<body>
		<div th:replace="~{fragments/layout_header :: layoutHeader}"></div>
		<div class="container">
			<div class="card">
				<h1>📚 表库字典管理</h1>
				<p class="muted">
					维护常用的表名和库名，便于在生成页面快速选择和自动填充。
				</p>

				<div class="section" style="padding: 12px 12px; margin-bottom: 12px">
					<div class="section-title" style="margin-bottom: 8px">
						<strong>新增记录</strong>
					</div>
					<form
						class="form"
						th:action="@{/tables/add}"
						method="post"
						style="font-size: 14px"
					>
						<div class="form-row" style="margin-bottom: 6px">
							<label for="tableName" style="min-width: 100px">表名</label>
							<input
								id="tableName"
								name="tableName"
								type="text"
								placeholder="请输入表名"
								required
								style="font-size: 14px"
							/>
						</div>
						<div class="form-row" style="margin-bottom: 6px">
							<label for="databaseName" style="min-width: 100px"
								>库名（可选）</label
							>
							<input
								id="databaseName"
								name="databaseName"
								type="text"
								placeholder="请输入库名（可留空）"
								style="font-size: 14px"
							/>
						</div>
						<div class="form-row" style="margin-bottom: 6px">
							<label for="remark" style="min-width: 100px">备注（可选）</label>
							<input
								id="remark"
								name="remark"
								type="text"
								placeholder="请输入备注信息（可留空）"
								style="font-size: 14px"
							/>
						</div>
						<div class="actions" style="margin-top: 8px">
							<button type="submit" style="font-size: 14px; padding: 8px 16px">
								添加记录
							</button>
						</div>
					</form>
				</div>

				<div class="section" style="padding: 12px 12px; margin-bottom: 12px">
					<div class="section-title" style="margin-bottom: 8px">
						<strong>搜索</strong>
					</div>
					<form
						class="form"
						method="get"
						th:action="@{/tables}"
						style="font-size: 14px"
					>
						<div class="form-row" style="margin-bottom: 6px">
							<label for="qTable" style="min-width: 100px">表名包含</label>
							<input
								id="qTable"
								name="tableName"
								type="text"
								th:value="${tableName}"
								style="font-size: 14px"
							/>
						</div>
						<div class="form-row" style="margin-bottom: 6px">
							<label for="qDb" style="min-width: 100px">库名包含</label>
							<input
								id="qDb"
								name="databaseName"
								type="text"
								th:value="${databaseName}"
								style="font-size: 14px"
							/>
						</div>
						<div class="actions" style="margin-top: 8px">
							<button
								type="submit"
								class="btn"
								style="font-size: 14px; padding: 8px 16px"
							>
								搜索
							</button>
							<a
								class="btn ghost"
								href="/tables"
								style="font-size: 14px; padding: 8px 16px"
								>重置</a
							>
						</div>
					</form>
				</div>

				<div class="toolbar" style="margin: 8px 0 12px">
					<span
						class="pill"
						th:text="'当前共 ' + ${#lists.size(records)} + ' 条记录'"
						>当前共 0 条记录</span
					>
				</div>

				<div style="overflow-x: auto">
					<table class="table">
						<thead>
							<tr>
								<th style="width: 72px">ID</th>
								<th>表名</th>
								<th>库名</th>
								<th>备注</th>
								<th style="width: 160px">创建时间</th>
								<th style="width: 120px">操作</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="r : ${records}">
								<td th:text="${r.id}">1</td>
								<td th:text="${r.tableName}">table_x</td>
								<td th:text="${r.databaseName}">db_y</td>
								<td th:text="${r.remark}">-</td>
								<td
									th:text="${r.createTime != null ? #dates.format(r.createTime, 'yyyy-MM-dd') : '-'}"
								>
									2025-01-01
								</td>
								<td>
									<form
										th:action="@{/tables/delete}"
										method="post"
										style="display: inline"
									>
										<input type="hidden" name="id" th:value="${r.id}" />
										<button type="submit" class="btn warn">删除</button>
									</form>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div th:replace="~{fragments/layout_footer :: layoutFooter}"></div>
	</body>
</html>
